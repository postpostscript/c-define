<x-is src="#x-define" name="x-define">
  <template id="x-define">
    <slot></slot>
    <script>
      const name = this.getAttribute("name");
      const src = this.getAttribute("src");
      const observedAttributes = this.getAttribute("observe")
        ?.trim()
        .split(/(\s|,)+/g);
      const formAssociated = this.hasAttribute("formAssociated");

      const template = src
        ? document.querySelector(src)
        : this.shadowRoot.children[0].assignedElements()[0];

      customElements.define(
        name,
        class extends DynamicElement {
          static observedAttributes = observedAttributes;
          static formAssociated = formAssociated;
          template = template;
        }
      );
    </script>
  </template>
</x-is>
